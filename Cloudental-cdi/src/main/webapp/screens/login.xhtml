<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Cloudental 0.3</title>
		<link href="../resources/css/login-style.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
		body {
			background-image: url(../resources/images/login/login_background.png);
			background-size: cover;
		}
		</style>
	</h:head>

 	<body>
		<div>
			<p:growl id="growl" showDetail="true" life="3000" /> 
	        <h:form id="loginForm" styleClass="loginForm">
	           <p:inputText id="username" value="#{loginService.name}" 
	           				requiredMessage="Please supply a username" required="true" 
	           				styleClass="username"/> <br/>  
	           <p:password  id="password" value="#{loginService.password}" feedback="false" 
	           				requiredMessage="Please supply a password" required="true" 
	           				styleClass="password"/> <br/>
	           <h:commandButton id="loginButton" value="Enter" action="#{loginService.login}"/>
	           <p:selectBooleanCheckbox id="directLogin" value="#{loginService.directlyToOffice}" 
	           				itemLabel="Straight to my office" styleClass="directlogin"/>
	        </h:form>
			<br />
	        <h:outputLink id="newUser" value="javascript:void(0)" onclick="dlgCreate.show()" 
	        				title="Create New User" styleClass="newuser">     
			    <p:graphicImage value="../resources/images/login/new-user.png" />  
			</h:outputLink>
	        <br />
	        <h:outputLink id="contactUs" value="javascript:void(0)" onclick="dlgContact.show()" 
	        				title="Contact Cloud.M" styleClass="contactus">     
			    <p:graphicImage value="../resources/images/login/contact.png" />  
			</h:outputLink>
			<br />
			
			<p:graphicImage id="logo" value="../resources/images/login/logo_cd.png" 
							styleClass="logo"/> 

			<p:dialog id="dialogCreate" header="Create New User" widgetVar="dlgCreate">  
			    <h:form id="dlgFrm">
   			        <h:panelGrid columns="2" cellpadding="5">
						<h:outputLabel for="name" value="Name " /> <p:inputText id="name" value="#{createUserService.dentist.name}"/>
						<h:outputLabel for="sname" value="Surname " /> <p:inputText id="sname" value="#{createUserService.dentist.surname}"/>
						<h:outputLabel for="uname" value="Username " /> <p:inputText id="uname" value="#{createUserService.dentist.username}"/>
						<h:outputLabel for="pwd" value="Password " /> <p:password id="pwd" value="#{createUserService.dentist.password}"/>
						<h:outputLabel for="pwd2" value="Re-type " /> <p:password id="pwd2" value="#{createUserService.passwordConfirm}"/>
			            <f:facet name="footer">  
			                <p:commandButton id="createButton" value="Create" update=":growl"   
			                    actionListener="#{createUserService.createDentist()}"   
			                    oncomplete="handleCreateRequest(xhr, status, args)"/>  
			            </f:facet>
			        </h:panelGrid>  
			    </h:form>  
			</p:dialog>  
			<br/> 
			<p:dialog id="dialogContact" header="Contact Cloud.M" widgetVar="dlgContact" showEffect="explode" modal="true">  
			    <h:form id="dlgFrmContact">
			    </h:form>  
			</p:dialog>  
		</div>
		
		<script type="text/javascript">  
		    function handleCreateRequest(xhr, status, args) {  
		        if(!args.created) {  
		            jQuery('#dialogCreate').effect("shake", { times:3 }, 100);  
		        } else {  
		            dlgCreate.hide();
		            jQuery('#newUser').fadeOut();  
		        }  
		    }   
		</script>
	</body>
</html>
