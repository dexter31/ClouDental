<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/screens/frontend/template.xhtml">
	<ui:define name="header">
    	Discounts 
    	<br />
		<h:outputText value="#{userHolder.currentUser.username}"></h:outputText>
		<br />
		<h:messages />
	</ui:define>

	<ui:define name="content">
		<!-- ********** start ********** -->
		
		  
		<h:form>
			<p:panel header="Discount">
				<h:panelGrid columns="2">
					<h:outputText value="Title: " />
					<h:inputText value="#{discountManagementBean.title}" label="Title" required="true" />
					<h:outputText value="Discount: " />
					<h:inputText value="#{discountManagementBean.discount}" label="Discount" required="true" >
						<f:validateLongRange minimum="0"/>
					</h:inputText>
					<h:outputText value="Description: " />
					<h:inputTextarea value="#{discountManagementBean.description}" label="Description" />
					<h:outputText value=" " />
					<h:panelGroup>
						<h:commandButton value="Create" action="#{discountManagementBean.createDiscount}" />
						<h:outputText value=" " />
						<h:commandButton value="Update" action="#{discountManagementBean.updateDiscount}" />
					</h:panelGroup>
				</h:panelGrid>
			</p:panel>
		</h:form>
		<!-- ********** end ********** -->
		<br />
		<br />
		<p:dataTable value="#{discountManagementBean.discounts}" var="item" >
			<p:column>
				<f:facet name="header"><h:outputText value="id"/></f:facet>
				<h:outputText value="#{item.id}" />
			</p:column>
			<p:column>
				<f:facet name="header"><h:outputText value="Title"/></f:facet>
				<h:outputText value="#{item.title}" />
			</p:column>
			<p:column>
				<f:facet name="header"><h:outputText value="Discount"/></f:facet>
				<h:outputText value="#{item.discount}" />
			</p:column>
			<p:column>
				<f:facet name="header"><h:outputText value="Description" /></f:facet>
				<h:outputText value="#{item.description}"/>
			</p:column>
			<p:column>
				<f:facet name="header"><h:outputText value="action delete"/></f:facet>
				<h:form>
					<h:commandLink action="delete">
						<f:actionListener type="com.mpdmal.cloudental.web.listeners.OnDeleteDiscountActionListener" />
						<h:outputText value="delete #{item.id}" />
					</h:commandLink>
				</h:form>
			</p:column>
			<p:column>
				<f:facet name="header"><h:outputText value="update" /></f:facet>
				<h:form>
					<h:commandLink action="update">
						<f:setPropertyActionListener value="#{item}" target="#{discountManagementBean.currentDiscount}" />
						<h:outputText value="get for update #{patient.surname}" />
					</h:commandLink>
				</h:form>
			</p:column>
		</p:dataTable>

	</ui:define>




</ui:composition>
</html>
