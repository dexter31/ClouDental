<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/screens/frontend/template.xhtml">
	<ui:define name="header">
    	Visit Management 
    	<br />
	</ui:define>


	<ui:define name="content">

		<h:outputText value="Visit" />
		<h:messages />
		<h:form id="visit">
			
			<h:panelGrid columns="2">
				<h:outputText value="Comments: " />
				<h:inputText value="#{visitManagementBean.comments}" label="comments"/>

				<h:outputText value="Start Date: " />
				<h:inputText value="#{visitManagementBean.visitdate}" label="startDate" required="true">
					<f:convertDateTime dateStyle="short" pattern="dd/MM/yyyy" />
				</h:inputText>

				<h:outputText value="End Date: " />
				<h:inputText value="#{visitManagementBean.enddate}" label="endDate" required="true">
					<f:convertDateTime dateStyle="short" pattern="dd/MM/yyyy" />
				</h:inputText>
				
				<p:selectOneListbox id="activity" value="#{visitManagementBean.selectedActivity}" converter="activityConverter" style="height:100px" >
					<f:selectItems value="#{visitManagementBean.openActivities}" var="activity" itemLabel="#{activity.id} - #{activity.description}" itemValue="#{activity}" />
				</p:selectOneListbox>
				
				<h:outputText value=" " />
				<h:commandButton value="Create" action="#{visitManagementBean.createVisit}" />

			</h:panelGrid>
		</h:form>
		<br />

		<h:dataTable value="#{visitManagementBean.visitList }" var="visit"
			border="1">
			<h:column>
				<f:facet name="header">
					<h:outputText value="id" />
				</f:facet>
				<h:outputText value="#{visit.id}" />
			</h:column>
			<h:column>
				<f:facet name="header">
					<h:outputText value="comments" />
				</f:facet>
				<h:outputText value="#{visit.comments}" />
			</h:column>
		</h:dataTable>
		<br />
	</ui:define>

</ui:composition>
</html>