<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Cloudental 0.2</title>
		<link href="../resources/css/login-style.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
		body {
			background-image: url(../resources/images/login/login_background.png);
			background-size: cover;
		}
		</style>
	</h:head>

 	<body>
		<div> 
	        <h:outputLink id="newUser" value="javascript:void(0)" onclick="dlgCreate.show()" title="Create New User" styleClass="newuserbutton">     
			    <p:graphicImage value="../resources/images/login/new-user.png" />  
			</h:outputLink>
	        <h:outputLink id="contactUs" value="javascript:void(0)" onclick="dlgContact.show()" title="Contact Cloud.M" styleClass="contactUs">     
			    <p:graphicImage value="../resources/images/login/contact.png" />  
			</h:outputLink>
			<br/><br/><br/><br/><br/><br/>
			<p:graphicImage value="../resources/images/login/logo.png" styleClass="logo"/> 
			<br/><br/><br/>
	        <h:form id="form1" name="form1" method="post" action="">
	           <p:inputText id="username" value="#{loginService.name}" required="true" label="username" styleClass="username"/> <br/>  
	           <h:inputSecret id="password" value="#{loginService.password}" required="true" label="password" styleClass="password" /> <br/>
	           <p:selectBooleanCheckbox id="directLogin" value="#{loginService.directlyToOffice}" itemLabel="Straight to my office" styleClass="directLogin"/> 
	           <h:commandButton id="loginButton" value="Enter" action="#{loginService.login}" styleClass="loginbutton" image="../resources/images/login/login.png"/>     
	        </h:form>
			<p:growl id="growl" showDetail="true" life="3000" />

			<p:dialog id="dialogCreate" header="Create New User" widgetVar="dlgCreate" showEffect="explode" >  
			    <h:form id="dlgFrm">
   			        <h:panelGrid columns="2" cellpadding="5">
						<h:outputLabel for="name" value="Name " /> <p:inputText id="name" value="#{createUserService.dentist.name}"/>
						<h:outputLabel for="sname" value="Surname " /> <p:inputText id="sname" value="#{createUserService.dentist.surname}"/>
						<h:outputLabel for="uname" value="Username " /> <p:inputText id="uname" value="#{createUserService.dentist.username}"/>
						<h:outputLabel for="pwd" value="Password " /> <p:password id="pwd" value="#{createUserService.dentist.password}"/>
						<h:outputLabel for="pwd2" value="Re-type " /> <p:password id="pwd2" value="#{createUserService.passwordConfirm}"/>
			            <f:facet name="footer">  
			                <p:commandButton id="createButton" value="Create" update=":growl"   
			                    actionListener="#{createUserService.createDentist()}"   
			                    oncomplete="handleCreateRequest(xhr, status, args)"/>  
			            </f:facet>
			        </h:panelGrid>  
			    </h:form>  
			</p:dialog>  
			<br/> 
			<p:dialog id="dialogContact" header="Contact Cloud.M" widgetVar="dlgContact" showEffect="explode" modal="true">  
			    <h:form id="dlgFrmContact">
			    </h:form>  
			</p:dialog>  
		</div>
		
		<script type="text/javascript">  
		    function handleCreateRequest(xhr, status, args) {  
		        if(!args.created) {  
		            jQuery('#dialogCreate').effect("shake", { times:3 }, 100);  
		        } else {  
		            dlgCreate.hide();
		            jQuery('#newUser').fadeOut();  
		        }  
		    }   
		</script>
	</body>
</html>
