<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Cloudental 0.3</title>
		<link href="../resources/css/login-style.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
		body {
			background-image: url(../resources/images/login/login_background.png);
			background-size: cover;
		}
		</style>
	</h:head>

 	<body>
		<div>
			<p:growl id="growl" showDetail="true" life="3000" /> 
	        <h:form id="loginForm" styleClass="loginForm">
	        	<h:panelGrid columnClasses="1">	        
		        	<h:panelGrid columnClasses="1">
			           	<h:inputText id="username" value="#{loginService.name}" 
			           				requiredMessage="Please supply a username" required="true" styleClass="username"/>   
			           	<h:inputSecret id="password" value="#{loginService.password}" feedback="false" 
			           				requiredMessage="Please supply a password" required="true" styleClass="password"/> 
					</h:panelGrid>
					<h:panelGrid columns="2">
		           		<h:commandButton id="loginButton" value="Enter" action="#{loginService.login}"/>
		           		<p:selectBooleanCheckbox id="directLogin" value="#{loginService.directlyToOffice}" 
		           								itemLabel="Straight to my office" styleClass="directlogin"/>
		           	</h:panelGrid>
	           	</h:panelGrid>		           	
				<p:graphicImage id="logo" value="../resources/images/login/logo_cd.png" styleClass="logo"/> 
				<br/>
				<h:panelGrid columns="1" style="position: fixed; top: 100%; margin-top: -70px;">				
			        <h:outputLink id="newUser" value="javascript:void(0)" onclick="dlgCreate.show()" 
			        				title="Create New User" >     
					    <p:graphicImage value="../resources/images/login/new-user.png" />  
					</h:outputLink>
			        <h:outputLink id="contactUs" value="javascript:void(0)" onclick="dlgContact.show()" 
			        				title="Contact Cloud.M" >     
					    <p:graphicImage value="../resources/images/login/contact.png" />  
					</h:outputLink>
				</h:panelGrid>
	        </h:form>			
			<p:dialog id="dialogCreate" header="Create New User" widgetVar="dlgCreate">  
			    <h:form id="dlgFrm">
   			        <h:panelGrid columns="2" cellpadding="5">
						<h:outputLabel for="name" value="Name " /> <p:inputText id="name" value="#{createUserService.dentist.name}"/>
						<h:outputLabel for="sname" value="Surname " /> <p:inputText id="sname" value="#{createUserService.dentist.surname}"/>
						<h:outputLabel for="uname" value="Username " /> <p:inputText id="uname" value="#{createUserService.dentist.username}"/>
						<h:outputLabel for="pwd" value="Password " /> <p:password id="pwd" value="#{createUserService.dentist.password}"/>
						<h:outputLabel for="pwd2" value="Re-type " /> <p:password id="pwd2" value="#{createUserService.passwordConfirm}"/>
			            <f:facet name="footer">  
			                <p:commandButton id="createButton" value="Create" update=":growl"   
			                    actionListener="#{createUserService.createDentist()}"   
			                    oncomplete="handleCreateRequest(xhr, status, args)"/>  
			            </f:facet>
			        </h:panelGrid>  
			    </h:form>  
			</p:dialog>  
			<p:dialog id="dialogContact" header="Contact Cloud.M" widgetVar="dlgContact" showEffect="explode" modal="true">
			    <h:form id="dlgFrmContact">
			    	<p:panel>
			            <f:facet name="footer">  
			                <p:commandButton id="sendButton" value="Send" update=":growl"	/>  
			            </f:facet>
		            </p:panel>
			    </h:form>  
			</p:dialog>  
		</div>
		
		<script type="text/javascript">  
		    function handleCreateRequest(xhr, status, args) {  
		        if(!args.created) {  
		            jQuery('#dialogCreate').effect("shake", { times:3 }, 100);  
		        } else {  
		            dlgCreate.hide();
		            jQuery('#newUser').fadeOut();  
		        }  
		    }   
		</script>
	</body>
</html>
